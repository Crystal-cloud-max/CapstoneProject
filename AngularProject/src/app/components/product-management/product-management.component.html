
<section class="vh-100 bg-image"
  style="background-image: url('https://static.vecteezy.com/system/resources/thumbnails/038/830/156/small_2x/ai-generated-minimalistic-sweet-and-candy-background-concept-with-empty-space-photo.jpg');">
  <div class="mask d-flex align-items-center h-100">
    <div class="container h-100">
      <div class="row d-flex justify-content-center align-items-center h-100">
        <div class="col-12 col-md-9 col-lg-7 col-xl-6">
        <!-- after clicking view details button because id index starts at 0 -->
        @if (productId >= 0) {
          <button data-mdb-button-init
          data-mdb-ripple-init class=
          "btn btn-success btn-block btn-sm gradient-custom-4 text-body"
          (click)="selectProduct(-1)">Return</button>
          <!-- call html template from product-details -->
          <app-product-details [productId]="productId"></app-product-details>
        }
        @else {
        <div class="card" style="border-radius: 15px; background-color: aliceblue;">

        <div class="card-body p-3">
            <table class="table caption-top" style="border-radius: 10px; background-color: aliceblue;">
                <thead>
                  <tr>
                    <th scope="col">Id</th>
                    <th scope="col">Sku</th>
                    <th scope="col">Product</th>
                    <th scope="col">Description</th>
                    <th scope="col">Stock</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                <!-- loop thru each row for the class attributes in each table data -->
                 @for(product of products; track $index){
                    <tr>
                        <th>{{$index+1}}</th>
                        <td>{{product.sku}}</td>
                        <td>{{product.name}}</td>
                        <td>{{product.description}}</td>
                        <td>{{product.initial_stock}}</td>
                        <td>
                            <button data-mdb-button-init
                            data-mdb-ripple-init class=
                            "btn btn-success btn-block btn-sm gradient-custom-4 text-body"
                            (click)="update($index)">Edit</button>
                            <button data-mdb-button-init
                            data-mdb-ripple-init class=
                            "btn btn-success btn-block btn-sm gradient-custom-4 text-body"
                            (click)="deleteProduct(product.id)">Delete</button>
                            
                            <button data-mdb-button-init
                            data-mdb-ripple-init class=
                            "btn btn-success btn-block btn-sm gradient-custom-4 text-body"
                            (click)="selectProduct(product.id)">Details</button>

                           
                        </td>
                    </tr>
                 }
                
                </tbody>
              </table>
            </div>
        </div>
        
            <div class="card" style="border-radius: 15px; background-color: aliceblue;">
                <div class="card-body p-3">
                  <h2 class="text-uppercase text-center mb-2" style="color:darkblue">Products</h2>
                  <!-- Product Form -->
                  <form>
                    <div data-mdb-input-init class="form-outline mb-2">
                      <input type="number" id="form3Example1cg" class="form-control form-control-md" 
                       placeholder="SKU" [(ngModel)]="product.sku" [ngModelOptions]="{standalone:true}" [disabled]=isDisabled />
                       <label class="form-label" for="form3Example1cg">Sku</label>
                    </div>
    
                    <div data-mdb-input-init class="form-outline mb-2">
                      <input type="text" id="form3Example3cg" class="form-control form-control-md"
                       placeholder="Product Name" [(ngModel)]="product.name" [ngModelOptions]="{standalone:true}" />
                       <label class="form-label" for="form3Example1cg">Product Name</label>
                    </div>

                    <div data-mdb-input-init class="form-outline mb-2">
                        <input type="text" id="form3Example3cg" class="form-control form-control-md"
                         placeholder="Description" [(ngModel)]="product.description" [ngModelOptions]="{standalone:true}" />
                         <label class="form-label" for="form3Example1cg">Description</label>
                    </div>

                    <div data-mdb-input-init class="form-outline mb-2">
                        <input type="number" id="form3Example1cg" class="form-control form-control-md" 
                         placeholder="Stock Qty" [(ngModel)]="product.initial_stock" [ngModelOptions]="{standalone:true}" />
                         <label class="form-label" for="form3Example1cg">Stock Quantity</label>
                    </div>
                    
                    <!-- display a success message after registered -->
                  <label id="successMsg" *ngIf="status" style="background-color: aquamarine; color:green">Product Added</label>
                    
                  <a href="/inventory-tracking" routerLinkActive="active">Alerts</a>
                    
                  <!-- submit button -->
                    <div class="d-flex justify-content-center">
                      <button type="submit" data-mdb-button-init
                        data-mdb-ripple-init class="btn btn-success btn-block btn-md gradient-custom-4 text-body"
                        (click)="addProduct()">Submit</button>
                    </div>
                  </form>
    
                </div>
              </div>
            }

          
        </div>
      </div>
    </div>
  </div>
</section>
